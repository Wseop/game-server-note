# 캐시와 CPU파이프라인
## 캐시
- 데이터를 임시로 저장해두는 장소.
- CPU에서 메모리까지가서 데이터를 가져오는 작업은 매우 느림. 따라서, 아래와 같은 원칙에 의해 캐시에 데이터를 미리 저장해두었다가 연산시 사용.
  - Temporal Locality : 최근에 사용한 데이터가 다시 사용될 확률이 높음
  - Spatial Locality : 사용한 데이터의 근처에 있는 데이터가 사용될 확률이 높음
## 캐시의 동작 확인하기
- `buffer[i][j]`와 `buffer[j][i]`로 접근했을 때 경과 시간 비교
```c++
int buffer[10000][10000];

int main()
{
    ::memset(buffer, 0, sizeof(buffer));

    // [][][][][]... [][][][][]... [][][][][]... [][][][][]... [][][][][]...
    // ↑ ↑ ↑ ...
    {
        auto start = ::GetTickCount64();

        int sum = 0;
        for (int i = 0; i < 10000; i++)
        {
            for (int j = 0; j < 10000; j++)
            {
                sum += buffer[i][j];
            }
        }

        auto end = ::GetTickCount64();
        cout << "Elapsed Tick : " << end - start << endl;
    }

    // [][][][][]... [][][][][]... [][][][][]... [][][][][]... [][][][][]...
    // ↑             ↑             ↑ 
    {
        auto start = ::GetTickCount64();

        int sum = 0;
        for (int i = 0; i < 10000; i++)
        {
            for (int j = 0; j < 10000; j++)
            {
                sum += buffer[j][i];
            }
        }

        auto end = ::GetTickCount64();
        cout << "Elapsed Tick : " << end - start << endl;
    }
}
```
- 실행 결과
```
Elapsed Tick : 94
Elapsed Tick : 312
```
